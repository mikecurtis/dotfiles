#!/bin/bash

GIT_USER=$(git config user.name)
GH_USER=$(gh auth status --active --json hosts --jq '.hosts."github.com".[0].login' 2>/dev/null)

if [ -n "$GH_USER" ] && [ "$GIT_USER" != "$GH_USER" ]; then
  echo "WARNING: Git user ($GIT_USER) != GitHub user ($GH_USER)"
  read -p "Continue anyway? (y/N) " -n 1 -r
  echo
  if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    exit 1
  fi
fi
